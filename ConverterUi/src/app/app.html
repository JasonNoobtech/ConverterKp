<div class="converter-container">
  <h1>Not-so-Simple Converter</h1>

  <div class="form-group">
    <label>Conversion Type:</label>
    <select [(ngModel)]="selectedType" (change)="updateUnits()">
      <option value="" disabled selected>Select type</option>
      <option *ngFor="let type of conversionTypes" [value]="type">{{ type }}</option>
    </select>
  </div>

  <div *ngIf="selectedType">
    <div class="form-group">
      <label>Value:</label>
      <p class="help-note" *ngIf="valueTxt && isNaN(parseFloat(valueTxt))">Format for text: "two thousand three hundred forty-five"</p>
      <input id="inputType" [(ngModel)]="valueTxt" placeholder="Enter value" />
    </div>

<!--    <div class="form-group">-->
<!--      <label>Conversion Subtype:</label>-->
<!--      <select [(ngModel)]="selectedType" (change)="updateUnits()">-->
<!--        <option value="" disabled selected>Select type</option>-->
<!--        <option *ngFor="let type of conversionTypes" [value]="type">{{ type }}</option>-->
<!--      </select>-->
<!--    </div>-->

    <div class="form-group">
      <label>From:</label>
      <div class="subtype" *ngIf="selectedType === 'Celestial Bodies'">
        <select [(ngModel)]="selectedFromSubType" (change)="updateFromUnits()">
          <option value="" disabled selected>Select subtype</option>
          <option *ngFor="let sub of conversionSubTypes" [value]="sub">{{ sub }}</option>
        </select>
      </div>
      <div class="from" [class.full-width]="selectedType !== 'Celestial Bodies'">
        <select [(ngModel)]="from">
          <option value="" disabled selected>Select unit</option>
          <option *ngFor="let unit of fromUnits" [value]="unit">{{ unit }}</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label>To:</label>
      <div class="subtype" *ngIf="selectedType === 'Celestial Bodies'">
        <select [(ngModel)]="selectedToSubType" (change)="updateToUnits()">
          <option value="" disabled selected>Select subtype</option>
          <option *ngFor="let sub of conversionSubTypes" [value]="sub">{{ sub }}</option>
        </select>
      </div>
      <div class="from" [class.full-width]="selectedType !== 'Celestial Bodies'">
        <select [(ngModel)]="to">
          <option value="" disabled selected>Select unit</option>
          <option *ngFor="let unit of toUnits" [value]="unit">{{ unit }}</option>
        </select>
      </div>
    </div>

    <button (click)="convert()">Convert</button>
    <button class="clearButton" (click)="clear()">Clear Entries</button>
  </div>

  <div class="result" *ngIf="result">
    {{ result }}
  </div>

  <div class="history" *ngIf="result">
    <button (click)="history()">History</button>

  </div>
</div>

<div class="history-container" *ngIf="showHistory">
  <h3>Conversion History</h3>
  <div *ngIf="historyData.length === 0" class="no-history">
    No conversion history found.
  </div>
  <div *ngFor="let item of historyData" class="history-item">
    <div class="conversion-details">
      <span class="conversion-type">{{ item.conversionType.charAt(0).toUpperCase() + item.conversionType.slice(1).toLowerCase() }}</span>
      <span class="conversion-formula">
        {{ item.inputValue }} {{ item.fromUnit }} â†’ {{ item.resultValue }} {{ item.toUnit }}
      </span>
      <span class="timestamp">{{ item.timestamp | date:'short' }}</span>
    </div>
  </div>
  <div>
    <button class="clearButton" (click)="clearHistory()">Clear History</button>
  </div>
</div>
